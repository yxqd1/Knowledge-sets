# 计算几何

## 一、相关公式

### 余弦公式：

a·b=| a |  | b | cos，其中| a |和| b |分别是这两个向量的模

### 点乘和叉乘公式

点乘：

标量：a·b=| a |  | b | cos     （a.x * b.x + a.y * b.y）

叉乘：

矢量：大小：a * b=|a||b| * sin      方向：垂直ab平面，右手方向  

（a.x * b.y - a.y * b.x）

（Vector(a.y * b.z-b.y * a.z,b.x * a.z-a.x * b.z,a.x * b.y-b.x * a.y) ）

### 已知两个点求直线：

已知直线上的两点P1(X1,Y1)  P2(X2,Y2)， P1  P2两点不重合。则直线的一般式方程AX+BY+C=0中，A B C分别等于：

A = Y2 - Y1

B = X1 - X2

C = X2 *Y1 - X1 * Y2

### 点到直线的距离

直线:Ax+By+C=0;

d=|A *x0+B *y0+C|/sqrt(A *A+B *B);

## 二、板子：

若开long double 容易T

若是double注意精度，取最小和最大可能有误差

```
#include <bits/stdc++.h>
using namespace std;
using i64 = long long;
using T = double;
struct Point {
    T x;
    T y;
    Point(T x = 0, T y = 0) : x(x), y(y) {}
    
    Point &operator+=(const Point &p) {
        x += p.x, y += p.y;
        return *this;
    }
    Point &operator-=(const Point &p) {
        x -= p.x, y -= p.y;
        return *this;
    }
    Point &operator*=(const T &v) {
        x *= v, y *= v;
        return *this;
    }
    friend Point operator-(const Point &p) {
        return Point(-p.x, -p.y);
    }
    friend Point operator+(Point lhs, const Point &rhs) {
        return lhs += rhs;
    }
    friend Point operator-(Point lhs, const Point &rhs) {
        return lhs -= rhs;
    }
    friend Point operator*(Point lhs, const T &rhs) {
        return lhs *= rhs;
    }
};

T dot(const Point &a, const Point &b) {//点乘,余弦，距离
    return a.x * b.x + a.y * b.y;
}

T cross(const Point &a, const Point &b) {//叉乘
    return a.x * b.y - a.y * b.x;
}
T len(Point p)//向量的长度
{
	return sqrt(p.x*p.x+p.y*p.y);
}
T dist(Point p,Point a,Point b)//点到直线的距离
{
	Point v1=b-a,v2=p-a;
	return fabs(cross(v1,v2)/len(v1));
}
void solve() {
    Point a[6];
    for (int i = 0; i < 6; i++) {
        cin >> a[i].x >> a[i].y;
    }
    
    if (cross(a[0] - a[1], a[2] - a[1]) < 0) swap(a[0], a[2]);
    if (cross(a[3] - a[4], a[5] - a[4]) < 0) swap(a[3], a[5]);
    
    double len0 = sqrt(dot(a[0] - a[1], a[0] - a[1]));
    double len1 = sqrt(dot(a[3] - a[4], a[3] - a[4]));
    
    if (abs(len0 - len1) > 1E-9) cout << "YES\n";
    else cout << "NO\n";
}

int main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr);
#ifdef LOCAL
    freopen("input.txt", "r", stdin);
    freopen("output.txt", "w", stdout); // a为add,,w
#endif
    int t;
    cin >> t;
    
    while (t--) {
        solve();
    }
    
    return 0;
}
//https://ac.nowcoder.com/acm/contest/46800/E  
```

## 例题：

杭电多校：[Problem - 7324 (hdu.edu.cn)](https://acm.hdu.edu.cn/showproblem.php?pid=7324)

注意精度，尽量减少计算

## 三、扫描线（未完

