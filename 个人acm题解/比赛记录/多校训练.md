# 多校训练

牛客多校：1、 2、 3、4、5、6、7（没打、8、9、

杭电多校：5、6、7、8、9

## 一、dp

### 1.1  有限制条件的转移

[K-Box_2023牛客暑期多校训练营2 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/57356/K)

加限制条件的转移，所有状态的转移

### 1.2 树形dp

[1002 City Upgrading (hdu.edu.cn)](https://acm.hdu.edu.cn/contest/problem?cid=1094&pid=1002)

### 1.3 dp，状态的压缩，挺不错的

[1010 Klee likes making friends (hdu.edu.cn)](https://acm.hdu.edu.cn/contest/problem?cid=1095&pid=1010)

第一维表示右边界，第二维表示左右边界的距离

1. 开始m
2. 中间逐个移动
3. 最后m个元素，选择ans

表示左右边界的话，可以直接l和r，但是空间不行的话，可以只记录右边界，然后记录长度

对于只和上个状态有关的时候，可以使用压缩空间滚动数组的方法。

### 1.4滚动数组，前缀和优化（不完全理解

[Problem - 7304 (hdu.edu.cn)](https://acm.hdu.edu.cn/showproblem.php?pid=7304)

### 1.5 组合数，dp 需再看

[B-Auspiciousness_2023牛客暑期多校训练营3 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/57357/B)

初始化组合数、阶乘数、dp数组

dp[ i ] [ j ] [ 2 ]  //i个小的   j个大的   最后一段是小的还是大的

枚举几个小的，几个大的，以及从哪里转移过来的

从哪里转移的以及答案记录都要使用组合数

### 1.6前缀和优化dp

[J-Qu'est-ce Que C'est?_2023牛客暑期多校训练营4 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/57358/J)

长度为n，然后范围在-m到m之间，保证每一段都>=0，数字可重复

dp[i] [j]表示构造了前i个，以j为结尾

对称的选择，并列的两次循环，并且使用前缀和进行优化

```c++
//前缀和优化dp
//每个位置都去尝试一遍
for(int i=2;i<=n;++i){
    for(int j=1;j<=2*m+1;++j){//j要减去m+1
    	if(j<=m)//1 对应 2*m 只有m可以用，之后只有到m-1、m-2...前缀和
       		dp[i][j]=(dp[i][j]+sum[2*m+1]-sum[2*m-j+1]+mod)%mod;
        else    //m+1 对应 0 （1-2*m+1）之后（2-2*m+1）...前缀和，只用可以相互抵消的可以用，
            dp[i][j]=(dp[i][j]+sum[2*m+1]-sum[j-m-1]+mod)%mod;
    }
    for(int j=1;j<=2*m+1;++j){
        sum[j]=(sum[j-1]+dp[i][j])%mod;
    }
}
```

### 1.7 dp[i] [j] 第一维表示第i个口袋，j个体重，求最大价值 

[H-Nazrin the Greeeeeedy Mouse_2023牛客暑期多校训练营5 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/57359/H)

对于过程的模拟和状态的转移，

背包，只不过可以选或者不选，每个操作都需要平方的转移

### 1.8 简单dp

[Problem - 7329 (hdu.edu.cn)](https://acm.hdu.edu.cn/showproblem.php?pid=7329)

dp某种意义上在于根据题意设置容器

状态维数往往代表循环个数

dp[i] [j] [k]表示当前位置，左袋有j，右袋有k，

模拟每个操作的处理之后就可以得到答案。

可以使用up来更新状态，这样更加集中

### 1.9 树形dp，树链剖分

[Problem - 7332 (hdu.edu.cn)](https://acm.hdu.edu.cn/showproblem.php?pid=7332)

重儿子、轻儿子

关键在于对树形式和状态转移以及转移时相关数量的理解很重要，模拟找找规律

用邻接矩阵建图容易空间过大，导致一些效率问题，其实这个没有卡

初始化和node开始为1，等号注意个数

### 1.10树形dp（待补

[A-Tree_2023牛客暑期多校训练营6 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/57360/A)

### 1.11dp（待补

[Problem - 7368 (hdu.edu.cn)](https://acm.hdu.edu.cn/showproblem.php?pid=7368)

### 1.12双指针或者dp（待补

[Problem - 7369 (hdu.edu.cn)](https://acm.hdu.edu.cn/showproblem.php?pid=7369)

### 1.13 状压dp，需要优化（待补

[F-IUPC_“范式杯”2023牛客暑期多校训练营10 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/57364/F)



## 二、博弈

### 1.1 sg函数

[1012 Play on Tree (hdu.edu.cn)](https://acm.hdu.edu.cn/contest/problem?cid=1094&pid=1012)

### 1.2nim游戏（待补

[1001 Alice Game (hdu.edu.cn)](https://acm.hdu.edu.cn/contest/problem?cid=1095&pid=1001)

### 1.3（待补

[Problem - 7354 (hdu.edu.cn)](https://acm.hdu.edu.cn/showproblem.php?pid=7354)

### 1.4 逆序对，先手的人可能发生变化，（不完全理解

[K-Scheming Furry_2023牛客暑期多校训练营8 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/57362/K)

好多题都和逆序对有关

一些结论要猜猜试试

### 1.5 博弈 、 sg函数

[D-Agnej_“范式杯”2023牛客暑期多校训练营10 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/57364/D)

分情况写sg函数，注意问题的最小规模和逻辑的推导

题意：每次只能拿一个，拿完一半就废了

代码核心：

```
int even(int x,int y){
    return (x+y)%2;
}
int odd(int l,int mid,int r){
    if(!mid)return even(l,r);
    if(l<r)swap(l,r);
    if(!r)return l%2;
    if(r==1)return (l%2==0)?3:2;
    return (l+1+r)%2;
}
```



## 三、图论

### 3.1最短路

[K-Subdivision_“范式杯”2023牛客暑期多校训练营1 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/57355/K)

### 3.2bitset优化

[1007 foreverlasting and fried-chicken (hdu.edu.cn)](https://acm.hdu.edu.cn/contest/problem?cid=1095&pid=1007)

bitset优化，图的模型，根据度和图的连接情况判断

### 3.3dfs，分层图或者并查集（没太看懂），也可以bfs+dfs完成

[E-Koraidon, Miraidon and DFS Shortest Path_2023牛客暑期多校训练营3 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/57357/E)

```
void bfs(int x)
{
    queue<int> q;
    q.push(x);
    depth[0] = 0;
    depth[x] = 1;
    while (q.size())
    {
        auto t = q.front();
        q.pop();
        for (auto lb : graph[t])
        {
            if (!depth[lb])
            {
                depth[lb] = depth[t] + 1;
                q.push(lb);
            }
        }
    }
}
void dfs(int x, int fa)
{
    dp[x] = 1;
    for (auto lb : graph[x])
    {
        if (dp[lb])
            continue;
        if (depth[lb] != depth[x] + 1)
        {
            flag = false;
            break;
        }
        dfs(lb, x);
    }
    dp[x] = 0;
}
```

### 3.4 最小环计数，Floyd

[Problem - 7322 (hdu.edu.cn)](https://acm.hdu.edu.cn/showproblem.php?pid=7322)

### 3.5倍增数组，找规律（待补

[Problem - 7345 (hdu.edu.cn)](https://acm.hdu.edu.cn/showproblem.php?pid=7345)

### 3.6并查集，联通块

[1007 Solubility (hdu.edu.cn)](https://acm.hdu.edu.cn/contest/problem?cid=1101&pid=1007)

### 3.7 拓扑排序

[L-Grayscale Confusion_“范式杯”2023牛客暑期多校训练营10 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/57364/L)

注意0 1点要合并，放到n的位置

题意可以暂时理解为每个点对于抽象函数的相对顺序

**偏序：**

*前置条件* 2 : 如果 R 是 自反 , 反对称 , 传递的 ;

① 自反 : 每个元素 自己 和 自己 都有关系 , x R x  ;
② 反对称 : 如果 x R y 并且 y R x 则 x = y  , 即 x ̸ = y  , x R y  和 y R x不能同时存在 ; 可以没有 , 但是一定不能同时出现 ;
③ 传递 : 如果 有 x R y  , y R z  , 那么必须有 x R z  , 如果前提不成立 , 那么也勉强称为传递 ;
*结论* : 称 R 为 A 上的偏序关系 ;
*应用*：在评分标准不能准确标定而又需要进行排序的场合，这时将成员进行两两比较，确定两者之间的好坏关系，是较为容易且准确的一种方法。

## 四、数论、二进制、推导公式

### 4.1 概率

[J-Roulette_“范式杯”2023牛客暑期多校训练营1 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/57355/J)

### 4.2 exgcd（待补

[M-Water_“范式杯”2023牛客暑期多校训练营1 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/57355/M)

### 4.3 概率、公式推导（有点问题

[Problem - 7297 (hdu.edu.cn)](https://acm.hdu.edu.cn/showproblem.php?pid=7297)

### 4.4 数论，哥德巴赫猜想

[H-Until the Blue Moon Rises_2023牛客暑期多校训练营3 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/57357/H)

### 4.5（待补，生成函数

[Problem - 7328 (hdu.edu.cn)](https://acm.hdu.edu.cn/showproblem.php?pid=7328)

### 4.6（待补

[Problem - 7325 (hdu.edu.cn)](https://acm.hdu.edu.cn/showproblem.php?pid=7325)

### 4.7（待补，难

[I-The Yakumo Family_2023牛客暑期多校训练营5 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/57359/I)

### 4.8 组合数，范德蒙卷积优化

[B-Distance_2023牛客暑期多校训练营6 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/57360/B)

每次看si和tj的贡献，左边和右边随便选，用范德蒙卷积优化

范德蒙卷积：

[范德蒙德卷积 - nofind 的博客 - 洛谷博客 (luogu.com.cn)](https://www.luogu.com.cn/blog/nofind/fan-de-meng-de-juan-ji)



<img src="C:\Users\30279\Desktop\个人acm题解\比赛记录\范德蒙卷积.png" alt="范德蒙卷积" style="zoom:80%;" />

### 4.9乘积、因子

[C-idol!!_2023牛客暑期多校训练营6 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/57360/C)

乘积、二进制有关的题，往往要分解，乘积往往和因子有关，二进制往往和每一位有关

乘积来自于5，所以和5的个数有关

### 4.10完全平方数的相关规律



- 完全平方数差的规律：

总结：

（1）3及3以上的所有奇数都可以表示为两个平方数的差。

（2）8及8以上所有4k形式的偶数都可以表示为两个不同平方数的差。

（3）除(1)和(2)以外的其他正整数都不可能表示成两平方数的差。

- 完全平方数和的规律：

 说明每个[正整数](https://baike.baidu.com/item/正整数/8461335?fromModule=lemma_inlink)均可表示为4个整数的平方和。

任何一个数都可以由《=4个完全平方数加和得到，代码为sqrt(n)的

```
	// 判断是否为完全平方数
    bool isPerfectSquare(int x) {
        int y = sqrt(x);
        return y * y == x;
    }

    // 判断是否能表示为 4^k*(8m+7)
    bool checkAnswer4(int x) {
        while (x % 4 == 0) {
            x /= 4;
        }
        return x % 8 == 7;
    }

    int numSquares(int n) {
        if (isPerfectSquare(n)) {
            return 1;
        }
        if (checkAnswer4(n)) {
            return 4;
        }
        for (int i = 1; i * i <= n; i++) {
            int j = n - i * i;
            if (isPerfectSquare(j)) {
                return 2;
            }
        }
        return 3;
    }

```

### 4.11 鞅的停时定理，完全随机事件的概率

[Problem - 7378 (hdu.edu.cn)](https://acm.hdu.edu.cn/showproblem.php?pid=7378)

当成模型吧，

题意：每次随机选两组，互相交换一个，直到只有一组拥有全部

方法：累乘累加前缀和优化

### 4.12 推公式，或者猜结论

[Problem - 7385 (hdu.edu.cn)](https://acm.hdu.edu.cn/showproblem.php?pid=7385)

（n个根）* （（n-1）！个树形 ）*（π(i从2到n)（min(i-1,k)）如何选择互不影响的前导节点）

### 4.13 二进制异或和、推导规律，模拟

[Problem - 7390 (hdu.edu.cn)](https://acm.hdu.edu.cn/showproblem.php?pid=7390)

样例造的越合适越容易发现规律

这个标程其实在反向模拟异或和的过程，每次选最小，每次看组合，而且题意有按顺序选最小的提示。

### 4.14  期望、模拟打表找规律（模拟的部分有点问题

[Problem - 7386 (hdu.edu.cn)](https://acm.hdu.edu.cn/showproblem.php?pid=7386)

模拟打出表之后规律很明显

## 五、公式、规律、贪心

### 5.1结论推导

[H-Matches_“范式杯”2023牛客暑期多校训练营1 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/57355/H)

### 5.2  结论（找规律，贪心、排序题

[D-The Game of Eating_2023牛客暑期多校训练营2 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/57356/D)

### 5.3结论、分类讨论（不完全懂，二分图博弈结论（网络流））

[F-Link with Chess Game_2023牛客暑期多校训练营2 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/57356/F)

### 5.4前缀和，位运算，翻转+1操作

[H-0 and 1 in BIT_2023牛客暑期多校训练营2 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/57356/H)

### 5.5矩阵，二进制，找规律

[D-Ama no Jaku_2023牛客暑期多校训练营3 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/57357/D)

### 5.6构造，签到，实际上是个模拟，不是那种粗暴的规则

[Problem - 7310 (hdu.edu.cn)](https://acm.hdu.edu.cn/showproblem.php?pid=7310)

### 5.7猜结论，全0或者全1，差个检验

[A-Bobo String Construction_2023牛客暑期多校训练营4 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/57358/A)

始终不对

1，方法错了

2，差个特判

### 5.8（难，待补

[B-Circle of Mistery_2023牛客暑期多校训练营5 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/57359/B)

### 5.9优化、找规律，

[Problem - 7341 (hdu.edu.cn)](https://acm.hdu.edu.cn/showproblem.php?pid=7341)

需要找到数学规律，然后进行优化、暴力

### 5.10vector ，找规律（待补

[Problem - 7338 (hdu.edu.cn)](https://acm.hdu.edu.cn/showproblem.php?pid=7338)

### 5.11 构造，规律，二分

[Problem - 7350 (hdu.edu.cn)](https://acm.hdu.edu.cn/showproblem.php?pid=7350)

反向构造，若答案是B则可以构造出B个1 3 之后加2 2 ，这是2的个数应该小于等于上限B

根据这个规律，二分查找答案

### 5.12 逆序对

[Problem - 7359 (hdu.edu.cn)](https://acm.hdu.edu.cn/showproblem.php?pid=7359)

每个数都和自己原来的位置有关，再加上反转的规律，自然想到逆序对

### 5.13利用逆序对反向构造全排列，

[E-Red and Blue and Green_2023牛客暑期多校训练营5 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/57359/E)

### 5.14 构造题，dfs（待补，有个公式死住了

[H-Merge the squares!_2023牛客暑期多校训练营4 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/57358/H)

[代码查看 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/view-submission?submissionId=63092924)

### 5.15找规律，双指针模拟

[Problem - 7365 (hdu.edu.cn)](https://acm.hdu.edu.cn/showproblem.php?pid=7365)

01**10这种的破解方法在于如果有连续的0那么0就有办法赢，否则如果只有一个11那么平局（没有连续的也行），或者有多个11那么1赢，对于10 * * 10也是同一个道理

### 5.16 构造，根据一些模式构造

[J-Permutation and Primes_2023牛客暑期多校训练营8 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/57362/J)

给出10个长度的固定模式，然后根据其差值关系来构造

### 5.17 利用栈相关stl进行处理的规律题

[H-Insert 1, Insert 2, Insert 3, ..._2023牛客暑期多校训练营8 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/57362/H)

### 5.18 双指针、前缀和优化

[D-Non-Puzzle: Error Permutation_2023牛客暑期多校训练营9 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/57363/D)

虽然是区间第k小但是没有用到主席树，反而是个贪心思维优化的题

以每个ai为中心，如果他是对应区间第i位第i小，那么所有涉及的区间全部消失

最后记录没有被消灭的区间

### 5.19 前缀和优化，扫描线，思维贪心

[I-Non-Puzzle: Segment Pair_2023牛客暑期多校训练营9 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/57363/I)

前缀和优化是个很重要的知识点

一维前缀和先算全部，然后减去重复的x-1的位置

### 5.20 图上，猜公式相关内容，（没太理解

[Problem - 7382 (hdu.edu.cn)](https://acm.hdu.edu.cn/showproblem.php?pid=7382)



## 六、树+数据结构

### 6.1、数学转化为树，gcd，构造压缩

[Problem - 7311 (hdu.edu.cn)](https://acm.hdu.edu.cn/showproblem.php?pid=7311)

compare函数的书写是难点，i+1和i+2还需要深入观察

### 6.2树状数组（待补

[Problem - 7337 (hdu.edu.cn)](https://acm.hdu.edu.cn/showproblem.php?pid=7337)

### 6.3点分治，dsu（待补

[Problem - 7339 (hdu.edu.cn)](https://acm.hdu.edu.cn/showproblem.php?pid=7339)

### 6.4记忆化搜索，hashmap记录处理（unordered_map）

[Problem - 7372 (hdu.edu.cn)](https://acm.hdu.edu.cn/showproblem.php?pid=7372)



## 七、字符串

### 7.1马拉车算法、dp、结论

[G-Link with Centrally Symmetric Strings_2023牛客暑期多校训练营2 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/57356/G)

能形成中心对称的串，就记录下来是可行的，外层是马拉车的板子

里边有点区别，初始化不存在的时候是0，而不是1（有点问题

考虑一个结论：每次左边界小于当前start的时候就更新start为右边界，i跳到右边界继续，从而节省复杂度

```
if(p[i]>1&&i-p[i]+1<=start){
	b[i+p[i]-2] = '$';
	start = i+p[i]-1;
	i = i+p[i]-2;
}
```

### 7.2马拉车，线段树优化（差点，没补完

[Problem - 7326 (hdu.edu.cn)](https://acm.hdu.edu.cn/showproblem.php?pid=7326)

### 7.3（待补

[Problem - 7366 (hdu.edu.cn)](https://acm.hdu.edu.cn/showproblem.php?pid=7366)

### 7.4（待补

[I-Make It Square_2023牛客暑期多校训练营8 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/57362/I)

### 7.5（待补

[Problem - 7391 (hdu.edu.cn)](https://acm.hdu.edu.cn/showproblem.php?pid=7391)



## 八、计算几何

### 8.1 注意精度和常数

[Problem - 7324 (hdu.edu.cn)](https://acm.hdu.edu.cn/showproblem.php?pid=7324)
