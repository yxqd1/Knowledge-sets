# 配置git环境与项目创建

[2. 配置git环境与项目创建 - AcWing](https://www.acwing.com/file_system/file/content/whole/index/content/5997810/)

## 项目设计

- 名称：King Of Bots，简称KOB

- 图标：

  

- 项目包含的模块

​	PK模块：匹配界面（微服务）、实况直播界面（WebSocket协议）

​	对局列表模块：对局列表界面、对局录像界面

​	排行榜模块：Bot排行榜界面

​	用户中心模块：注册界面、登录界面、我的Bot界面、每个Bot的详情界面



- 前后端分离模式

​	SpringBoot实现后端

​	Vue3实现Web端和AcApp端

## 配置git环境

1. 安装Git Bash（使用Mac和Linux的同学可以跳过这一步）：https://gitforwindows.org/
2. 进入家目录生成秘钥：执行命令ssh-keygen
3. 在Ac Git上注册账号，地址：https://git.acwing.com/
4. 将id_rsa.pub的内容复制到Ac Git上

## 创建项目后端

​	https://start.spring.io/加载慢的话，可以换成：https://start.aliyun.com



## 创建项目Web端与AcApp端

​	vscode下载地址：https://code.visualstudio.com/

​	不熟悉Vue3的同学可以参考《Web应用课》的讲义和视频讲解：

- ​	讲义

​	[6. Vue3 - AcWing](https://www.acwing.com/file_system/file/content/whole/index/content/5639568/)

- 视频讲解

  ​	[6.1 Vue3——网站整体布局、用户动态页面 - AcWing](https://www.acwing.com/file_system/file/content/whole/index/content/5645302/)

  [6.2 Vue3——用户列表、登录、注册页面 - AcWing](https://www.acwing.com/file_system/file/content/whole/index/content/5681445/)

## 在SpringBoot中解决跨域问题

添加配置类：CorsConfig

```java
package com.kob.backend.config;

import org.springframework.context.annotation.Configuration;

import javax.servlet.*;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

@Configuration
public class CorsConfig implements Filter {
    @Override
    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {
        HttpServletResponse response = (HttpServletResponse) res;
        HttpServletRequest request = (HttpServletRequest) req;

        String origin = request.getHeader("Origin");
        if(origin!=null) {
            response.setHeader("Access-Control-Allow-Origin", origin);
        }
    
        String headers = request.getHeader("Access-Control-Request-Headers");
        if(headers!=null) {
            response.setHeader("Access-Control-Allow-Headers", headers);
            response.setHeader("Access-Control-Expose-Headers", headers);
        }
    
        response.setHeader("Access-Control-Allow-Methods", "*");
        response.setHeader("Access-Control-Max-Age", "3600");
        response.setHeader("Access-Control-Allow-Credentials", "true");
    
        chain.doFilter(request, response);
    }
    
    @Override
    public void init(FilterConfig filterConfig) {
    
    }
    
    @Override
    public void destroy() {
    }
}
```

# 个人

## 仓库方面

### 创建仓库

在文件夹里使用git bash 输入

echo "# kob" >> README.md
git init
git add .
git commit -m "first commit"
git branch -M main
git remote add origin https://github.com/yxqd1/kob.git
git push -u origin main

### 更新仓库

在文件夹中git bash中

git add .

git commit -m "test"

git push

### 拉取仓库内容

在文件夹git bash

git clone git@github.com:yxqd1/kob.git

使用完一次后，进入文件输入 git pull 即可完成更新



也可以回滚到某个版本

git local

git reset --hard (commit 里前7位内容)

或者

git reset --hard HEAD^



也可以回滚回来

git reflog

git reset --hard (commit 里前7位内容)

## 前后端通信

### APP.vue

里面有

```vue
<template>
<!-- html -->
  <div>
    <div>Bot昵称：{{ bot_name }}</div>
    <div>Bot战力：{{ bot_rating }}</div>
  </div>
  <router-view/>
</template>

<script>
// js
//从后端取得内容
import $ from 'jquery';
import { ref } from 'vue';
// 对象
export default{
  // 属性
  name:"App",
  // 函数入口
  setup: () => {
    // 声明
    let bot_name = ref("");
    let bot_rating = ref("");

    $.ajax ({
      url: "http://127.0.0.1:3000/pk/getbotinfo/",
      type: "get",
      success:resp => {
        bot_name.value = resp.name;
        bot_rating.value = resp.rating;

      }
    });

    return {
      bot_name,
      bot_rating
    }
  }
}
</script>

<style> 
/* css */
body{
  background-image: url("@/assets/background.png");
  background-size: cover;
}
</style>
```



